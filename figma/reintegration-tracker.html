<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reintegration Tracker - EduTracker</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- React Components -->
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>
</head>
<body>
    <div class="reintegration-tracker">
        <div class="background">
            <div class="sidebar">
                <div style="height:100px"></div>
                <!-- EduTracker logo -->
                <div class="edutracker-logo">
                    <svg width="288" height="39" viewBox="0 0 288 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M21.4636 38.2978C25.147 38.2978 28.6795 36.8346 31.2841 34.2301C33.8886 31.6255 35.3518 28.093 35.3518 24.4096C35.3518 20.7262 33.8886 17.1937 31.2841 14.5891C28.6795 11.9846 25.147 10.5214 21.4636 10.5214C17.7802 10.5214 14.2477 11.9846 11.6432 14.5891C9.03861 17.1937 7.57539 20.7262 7.57539 24.4096C7.57539 28.093 9.03861 31.6255 11.6432 34.2301C14.2477 36.8346 17.7802 38.2978 21.4636 38.2978ZM24.2141 28.1583L16.3857 31.1693C15.3333 31.5761 14.2971 30.54 14.704 29.4875L17.7149 21.6591C17.8939 21.198 18.252 20.8399 18.7131 20.6609L26.5415 17.6499C27.594 17.2431 28.6302 18.2793 28.2233 19.3317L25.2123 27.1601C25.0387 27.6213 24.6753 27.9793 24.2141 28.1583ZM23.1996 24.4096C23.1996 23.9492 23.0167 23.5076 22.6912 23.182C22.3656 22.8565 21.924 22.6736 21.4636 22.6736C21.0032 22.6736 20.5616 22.8565 20.2361 23.182C19.9105 23.5076 19.7276 23.9492 19.7276 24.4096C19.7276 24.87 19.9105 25.3116 20.2361 25.6372C20.5616 25.9627 21.0032 26.1456 21.4636 26.1456C21.924 26.1456 22.3656 25.9627 22.6912 25.6372C23.0167 25.3116 23.1996 24.87 23.1996 24.4096Z" fill="#28585F"/>
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M21.4636 38.0255C28.9834 38.0255 35.0795 31.9294 35.0795 24.4096C35.0795 16.8897 28.9834 10.7937 21.4636 10.7937C13.9437 10.7937 7.84767 16.8897 7.84767 24.4096C7.84767 31.9294 13.9437 38.0255 21.4636 38.0255Z" fill="#144047" fill-opacity="0.5"/>
                      <path d="M21.4631 0C22.0064 0 22.543 0.0946733 23.0527 0.277259L41.8665 7.12759C42.5036 7.36427 42.9262 7.97289 42.9262 8.6559C42.9262 9.3389 42.5036 9.94752 41.8665 10.1842L37.983 11.5975C39.083 13.3423 39.7067 15.4048 39.7067 17.5755V19.4758C39.7067 21.3963 40.4311 23.3777 41.2024 24.9398C41.6384 25.8189 42.1348 26.6845 42.7116 27.4825C42.9262 27.7733 42.9866 28.1519 42.8658 28.4968C42.7451 28.8417 42.4634 29.0987 42.1146 29.1866L37.822 30.2686C37.5403 30.343 37.2385 30.2889 36.9903 30.1333C36.7421 29.9778 36.5678 29.7208 36.5141 29.43C35.9373 26.5357 36.2257 23.939 36.655 22.0793C36.8696 21.119 37.158 20.1385 37.5604 19.2391V17.5755C37.5604 15.5333 36.8763 13.606 35.6891 12.0642C34.8239 11.016 33.7038 10.1707 32.3892 9.64997L21.8588 5.47756C21.3088 5.26116 20.6851 5.53166 20.4704 6.08618C20.2558 6.6407 20.5241 7.2696 21.0741 7.486L31.6044 11.6584C32.4361 11.9898 33.1672 12.4969 33.7641 13.1191L23.0594 17.0142C22.5497 17.1968 22.0131 17.2915 21.4698 17.2915C20.9265 17.2915 20.3899 17.1968 19.8802 17.0142L1.05974 10.1842C0.422556 9.95428 0 9.3389 0 8.6559C0 7.97289 0.422556 7.36427 1.05974 7.12759L19.8735 0.277259C20.3832 0.0946733 20.9198 0 21.4631 0Z" fill="#144047"/>
                      <path d="M64.669 35.8949H46.8263V4.91382H64.669V10.2963H53.3955V17.0986H63.885V22.4811H53.3955V30.47H64.669V35.8949Z" fill="#2B5359"/>
                      <path d="M78.1464 36.3187C75.5046 36.3187 73.3502 35.2874 71.6832 33.2249C70.0303 31.1482 69.2039 28.1037 69.2039 24.0916C69.2039 20.0371 70.0445 16.9714 71.7256 14.8947C73.4067 12.8039 75.6035 11.7585 78.316 11.7585C79.4462 11.7585 80.4421 11.9139 81.3039 12.2247C82.1657 12.5355 82.9073 12.9522 83.5289 13.4749C84.1647 13.9977 84.7015 14.5839 85.1394 15.2338H85.3513C85.2666 14.7817 85.1606 14.1177 85.0335 13.2418C84.9205 12.3518 84.864 11.4406 84.864 10.5082V2.92188H91.3484V35.8949H86.3897L85.1394 32.8222H84.864C84.4543 33.4721 83.9386 34.0654 83.317 34.6023C82.7096 35.125 81.982 35.5417 81.1344 35.8525C80.2867 36.1633 79.2908 36.3187 78.1464 36.3187ZM80.4139 31.1693C82.1798 31.1693 83.423 30.6466 84.1435 29.6012C84.8781 28.5417 85.2666 26.9524 85.309 24.8333V24.134C85.309 21.8312 84.9558 20.0724 84.2494 18.8574C83.5431 17.6284 82.2292 17.0138 80.3079 17.0138C78.8811 17.0138 77.765 17.6284 76.9598 18.8574C76.1545 20.0865 75.7519 21.8595 75.7519 24.1763C75.7519 26.4932 76.1545 28.2379 76.9598 29.4105C77.7791 30.5831 78.9305 31.1693 80.4139 31.1693Z" fill="#2B5359"/>
                      <path d="M119.85 12.2035V35.8949H114.891L114.023 32.8646H113.684C113.175 33.6699 112.539 34.3268 111.776 34.8354C111.014 35.344 110.173 35.7183 109.255 35.9585C108.336 36.1987 107.383 36.3187 106.394 36.3187C104.699 36.3187 103.222 36.0221 101.965 35.4287C100.708 34.8212 99.7258 33.8818 99.0195 32.6103C98.3272 31.3389 97.9811 29.686 97.9811 27.6517V12.2035H104.444V26.0411C104.444 27.7364 104.748 29.0149 105.356 29.8767C105.963 30.7385 106.931 31.1693 108.259 31.1693C109.573 31.1693 110.604 30.8727 111.353 30.2793C112.101 29.6719 112.624 28.7889 112.921 27.6305C113.232 26.4579 113.387 25.031 113.387 23.3499V12.2035H119.85Z" fill="#2B5359"/>
                      <path d="M139.091 35.8949H132.522V10.3811H124.11V4.91382H147.504V10.3811H139.091V35.8949Z" fill="#2B5359"/>
                      <path d="M164.987 11.7585C165.312 11.7585 165.686 11.7797 166.11 11.8221C166.548 11.8503 166.901 11.8927 167.169 11.9492L166.682 18.0098C166.47 17.9392 166.166 17.8897 165.771 17.8615C165.389 17.8191 165.057 17.7979 164.775 17.7979C163.941 17.7979 163.129 17.9038 162.338 18.1157C161.561 18.3277 160.862 18.6738 160.24 19.1541C159.618 19.6203 159.124 20.2419 158.757 21.0189C158.403 21.7818 158.227 22.7212 158.227 23.8373V35.8949H151.764V12.2035H156.659L157.612 16.1874H157.93C158.396 15.3821 158.976 14.6475 159.668 13.9835C160.374 13.3054 161.172 12.7686 162.062 12.373C162.967 11.9633 163.941 11.7585 164.987 11.7585Z" fill="#2B5359"/>
                      <path d="M181.177 11.7161C184.355 11.7161 186.792 12.4083 188.487 13.7928C190.183 15.1773 191.03 17.2822 191.03 20.1077V35.8949H186.517L185.266 32.6739H185.097C184.419 33.5215 183.727 34.2138 183.02 34.7506C182.314 35.2874 181.502 35.683 180.583 35.9373C179.665 36.1916 178.549 36.3187 177.235 36.3187C175.836 36.3187 174.579 36.0503 173.463 35.5135C172.361 34.9766 171.492 34.1573 170.857 33.0553C170.221 31.9393 169.903 30.5266 169.903 28.8172C169.903 26.3025 170.786 24.4518 172.552 23.2651C174.318 22.0643 176.967 21.4003 180.498 21.2732L184.61 21.146V20.1077C184.61 18.8645 184.285 17.9533 183.635 17.3741C182.985 16.7949 182.081 16.5052 180.922 16.5052C179.778 16.5052 178.655 16.6677 177.553 16.9926C176.451 17.3176 175.349 17.7273 174.247 18.2217L172.107 13.8564C173.364 13.1924 174.77 12.6697 176.324 12.2883C177.892 11.9068 179.51 11.7161 181.177 11.7161ZM184.61 24.918L182.109 25.0028C180.018 25.0593 178.563 25.4337 177.744 26.1259C176.938 26.8181 176.536 27.7294 176.536 28.8595C176.536 29.8484 176.825 30.5548 177.405 30.9786C177.984 31.3883 178.74 31.5932 179.672 31.5932C181.057 31.5932 182.222 31.1835 183.169 30.3641C184.129 29.5447 184.61 28.3792 184.61 26.8676V24.918Z" fill="#2B5359"/>
                      <path d="M207.326 36.3187C204.981 36.3187 202.982 35.8949 201.329 35.0473C199.676 34.1855 198.419 32.8576 197.557 31.0634C196.695 29.2692 196.265 26.9735 196.265 24.1763C196.265 21.2803 196.752 18.921 197.727 17.0986C198.716 15.262 200.079 13.9129 201.817 13.0511C203.568 12.1894 205.596 11.7585 207.898 11.7585C209.537 11.7585 210.95 11.9209 212.137 12.2459C213.337 12.5567 214.383 12.931 215.273 13.369L213.366 18.37C212.348 17.9603 211.402 17.6284 210.526 17.3741C209.65 17.1057 208.774 16.9714 207.898 16.9714C206.768 16.9714 205.829 17.2399 205.08 17.7767C204.331 18.2994 203.773 19.0905 203.406 20.1501C203.039 21.2096 202.855 22.5376 202.855 24.134C202.855 25.7021 203.053 27.0018 203.448 28.0331C203.844 29.0644 204.416 29.8343 205.165 30.3429C205.913 30.8374 206.825 31.0846 207.898 31.0846C209.24 31.0846 210.434 30.908 211.48 30.5548C212.525 30.1875 213.542 29.6789 214.531 29.0291V34.5599C213.542 35.1815 212.504 35.6265 211.416 35.8949C210.342 36.1775 208.979 36.3187 207.326 36.3187Z" fill="#2B5359"/>
                      <path d="M226.504 2.92188V17.6707C226.504 18.5608 226.469 19.4508 226.398 20.3408C226.327 21.2308 226.25 22.1208 226.165 23.0108H226.25C226.688 22.3892 227.133 21.7747 227.585 21.1672C228.051 20.5598 228.545 19.9735 229.068 19.4084L235.701 12.2035H242.99L233.582 22.4811L243.563 35.8949H236.103L229.28 26.2954L226.504 28.5205V35.8949H220.041V2.92188H226.504Z" fill="#2B5359"/>
                      <path d="M256.722 11.7585C258.912 11.7585 260.798 12.1823 262.38 13.0299C263.962 13.8634 265.184 15.0784 266.046 16.6748C266.908 18.2711 267.339 20.2207 267.339 22.5235V25.6597H252.06C252.131 27.4821 252.675 28.916 253.692 29.9615C254.723 30.9928 256.15 31.5084 257.972 31.5084C259.484 31.5084 260.869 31.353 262.126 31.0422C263.383 30.7314 264.676 30.2652 266.004 29.6436V34.6447C264.831 35.2239 263.602 35.6477 262.317 35.9161C261.045 36.1845 259.498 36.3187 257.676 36.3187C255.302 36.3187 253.197 35.8808 251.361 35.0049C249.538 34.129 248.105 32.794 247.059 30.9998C246.028 29.2057 245.512 26.9453 245.512 24.2187C245.512 21.4498 245.978 19.147 246.911 17.3105C247.857 15.4598 249.171 14.0754 250.852 13.1571C252.533 12.2247 254.49 11.7585 256.722 11.7585ZM256.765 16.3569C255.507 16.3569 254.462 16.7595 253.628 17.5648C252.809 18.37 252.336 19.6344 252.208 21.358H261.278C261.264 20.3973 261.087 19.5426 260.748 18.7939C260.423 18.0451 259.929 17.4518 259.265 17.0138C258.615 16.5759 257.782 16.3569 256.765 16.3569Z" fill="#2B5359"/>
                      <path d="M285.817 11.7585C286.142 11.7585 286.517 11.7797 286.94 11.8221C287.378 11.8503 287.732 11.8927 288 11.9492L287.513 18.0098C287.301 17.9392 286.997 17.8897 286.601 17.8615C286.22 17.8191 285.888 17.7979 285.605 17.7979C284.772 17.7979 283.96 17.9038 283.168 18.1157C282.391 18.3277 281.692 18.6738 281.07 19.1541C280.449 19.6203 279.954 20.2419 279.587 21.0189C279.234 21.7818 279.057 22.7212 279.057 23.8373V35.8949H272.594V12.2035H277.489L278.443 16.1874H278.761C279.227 15.3821 279.806 14.6475 280.498 13.9835C281.205 13.3054 282.003 12.7686 282.893 12.373C283.797 11.9633 284.772 11.7585 285.817 11.7585Z" fill="#2B5359"/>
                    </svg>
                </div>
                <div style="height:50px"></div>
                <hr style="width: 75%; text-align:center; height: 2px; background-color:rgb(41, 41, 41)">
                <div style="height:50px"></div>

                  <!-- Wrap everything in a single scrollable container -->
            <div class="scrollable-sidebar-content">
                <!-- Sidebar Year and Term Selector -->
                <div>
                    <div class="dropdown-button-container" id="dropdownContainer">
                        <button class="dropdown-button" onclick="toggleDropdown()">
                            Select Year
                            <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" width="10" height="6" viewBox="0 0 10 6" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 1L5 5L9 1"></path>
                            </svg>
                        </button>
                        <div class="dropdown-content" id="dropdownContent">
                            <a href="#" onclick="selectYear('2024')">2024</a>
                            <a href="#" onclick="selectYear('2023')">2023</a>
                            <a href="#" onclick="selectYear('2022')">2022</a>
                            <a href="#" onclick="selectYear('2021')">2021</a>
                            <a href="#" onclick="selectYear('2020')">2020</a>
                        </div>
                    </div>
                </div>
                <div style="height:50px"></div>
                <div id="grades-root" class="sidebar-grades"></div>
                <section>
                    <div class="admin-dashboard-search-modal">
                        <div class="admin-dashboard-modal-title">School Search</div>
                        <div class="admin-dashboard-search-bar">
                            <i class="fa fa-search"></i>
                            <input type="text" placeholder="Search School Name" oninput="handleSchoolSearch(event)" />
                        </div>
                        <!-- Adding a scrollable area for the school list -->
                        <ul id="school-list" class="admin-dashboard-school-list">
                            <!-- List of filtered schools will be rendered here -->
                        </ul>
                    </div>
                </section>
            </div>
        </div>
        <!-- Schools List Section -->
        <div class="main">
            <div class="header-info">
                <div class="upper-info-indicator">
                    <section id="school-name-indicator" class="school-name-indicator">
                        <div class="row">
                            <div class="upper-info-icon-shape school-name-indicator">
                                <svg width="21" height="17" viewBox="0 0 21 17" fill="white" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M10.7369 0.505664C10.3994 0.280664 9.96191 0.280664 9.62441 0.505664L5.37754 3.33691H1.68066C0.852539 3.33691 0.180664 4.00879 0.180664 4.83691V14.8369C0.180664 15.665 0.852539 16.3369 1.68066 16.3369H8.18066V13.3369C8.18066 12.2338 9.07754 11.3369 10.1807 11.3369C11.2838 11.3369 12.1807 12.2338 12.1807 13.3369V16.3369H18.6807C19.5088 16.3369 20.1807 15.665 20.1807 14.8369V4.83691C20.1807 4.00879 19.5088 3.33691 18.6807 3.33691H14.9838L10.7369 0.505664ZM3.18066 6.33691H4.18066C4.45566 6.33691 4.68066 6.56191 4.68066 6.83691V8.83691C4.68066 9.11191 4.45566 9.33691 4.18066 9.33691H3.18066C2.90566 9.33691 2.68066 9.11191 2.68066 8.83691V6.83691C2.68066 6.56191 2.90566 6.33691 3.18066 6.33691ZM15.6807 6.83691C15.6807 6.56191 15.9057 6.33691 16.1807 6.33691H17.1807C17.4557 6.33691 17.6807 6.56191 17.6807 6.83691V8.83691C17.6807 9.11191 17.4557 9.33691 17.1807 9.33691H16.1807C15.9057 9.33691 15.6807 9.11191 15.6807 8.83691V6.83691ZM3.18066 10.3369H4.18066C4.45566 10.3369 4.68066 10.5619 4.68066 10.8369V12.8369C4.68066 13.1119 4.45566 13.3369 4.18066 13.3369H3.18066C2.90566 13.3369 2.68066 13.1119 2.68066 12.8369V10.8369C2.68066 10.5619 2.90566 10.3369 3.18066 10.3369ZM15.6807 10.8369C15.6807 10.5619 15.9057 10.3369 16.1807 10.3369H17.1807C17.4557 10.3369 17.6807 10.5619 17.6807 10.8369V12.8369C17.6807 13.1119 17.4557 13.3369 17.1807 13.3369H16.1807C15.9057 13.3369 15.6807 13.1119 15.6807 12.8369V10.8369ZM7.43066 5.83691C7.43066 5.10757 7.7204 4.4081 8.23612 3.89237C8.75185 3.37665 9.45132 3.08691 10.1807 3.08691C10.91 3.08691 11.6095 3.37665 12.1252 3.89237C12.6409 4.4081 12.9307 5.10757 12.9307 5.83691C12.9307 6.56626 12.6409 7.26573 12.1252 7.78146C11.6095 8.29718 10.91 8.58691 10.1807 8.58691C9.45132 8.58691 8.75185 8.29718 8.23612 7.78146C7.7204 7.26573 7.43066 6.56626 7.43066 5.83691ZM10.1807 4.33691C9.90566 4.33691 9.68066 4.56191 9.68066 4.83691V5.83691C9.68066 6.11191 9.90566 6.33691 10.1807 6.33691H11.1807C11.4557 6.33691 11.6807 6.11191 11.6807 5.83691C11.6807 5.56191 11.4557 5.33691 11.1807 5.33691H10.6807V4.83691C10.6807 4.56191 10.4557 4.33691 10.1807 4.33691Z" fill="white"/>
                                </svg>
                            </div>
                            <p class="label">School Name:</p>
                            <p class="value" id="school-name-value">Loading...</p>
                        </div>
                    </section>
                    <section id="total-students-indicator" class="total-students-indicator">
                        <div class="row">
                            <div class="upper-info-icon-shape total-students-indicator">
                                <i class="fa fa-users upper-info-icon"></i>
                            </div>
                            <p class="label">Total Students:</p>
                            <p class="value" id="total-students-value">Loading...</p>
                        </div>
                    </section>
                    <section id="term-year-indicator" class="term-year-indicator">
                        <div class="row">
                            <div class="upper-info-icon-shape term-year-indicator">
                                <i class="fa fa-calendar upper-info-icon"></i>
                            </div>
                            <p class="label">Term & Year:</p>
                            <p class="value" id="term-year-value">Loading...</p>
                        </div>
                    </section>
                </div>
            </div>
            <div style="height:20px;"></div>
            <div class="student-section">
                <div class="students-list-container">
                    <h1 id="selected-grade-title" class="students-title">Grade Level</h1>
                    <p id="selected-grade-subtitle" class="students-memo">Students</p>
                    <div id="students-root" class="students-list"></div>
                </div>
            </div>
             <!-- Back Button -->
    <button onclick="goBack()" class="back-button">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16 8C16 5.87827 15.1571 3.84344 13.6569 2.34315C12.1566 0.842855 10.1217 0 8 0C5.87827 0 3.84344 0.842855 2.34315 2.34315C0.842855 3.84344 0 5.87827 0 8C0 10.1217 0.842855 12.1566 2.34315 13.6569C3.84344 15.1571 5.87827 16 8 16C10.1217 16 12.1566 15.1571 13.6569 13.6569C15.1571 12.1566 16 10.1217 16 8ZM6.79375 11.7781L3.67188 8.43125C3.5625 8.3125 3.5 8.15937 3.5 8C3.5 7.84063 3.5625 7.68437 3.67188 7.56875L6.79375 4.22188C6.925 4.08125 7.10937 4 7.30312 4C7.6875 4 8 4.3125 8 4.69688V6.5H11C11.5531 6.5 12 6.94687 12 7.5V8.5C12 9.05313 11.5531 9.5 11 9.5H8V11.3031C8 11.6875 7.6875 12 7.30312 12C7.10937 12 6.925 11.9187 6.79375 11.7781Z" fill="#144047"/>
        </svg>
        </button>
        </div>
    </div>
</div>
</div>
        <!-- Modal structure for student profile -->
        <div id="student-profile-modal-underlay" class="reintegration-tracker modal-underlay" onClick="CloseModal('student-profile')">
            <div id="student-profile-modal" class="modal" onClick="event.stopPropagation()">
                <div class="modal-header">
                    <div class="modal-title">Student Profile Information</div>
                    <span class="modal-close" title="Close" onClick="CloseModal('student-profile')">&times;</span>
                </div>
                <div id="student-profile-modal-root" class="modal-body">
                    <!-- Student profile content will be rendered here -->
                </div>
                <div class="modal-footer">
                    <button class="save-button" onClick="document.getElementById('student-profile-form').submit()">Save</button>
                </div>
            </div>
        </div>
    </div>
   

    <script type="text/babel">
        const schoolInfo = [
            { _id: 'school-001', school_name: 'Accra Primary School' },
            { _id: 'school-002', school_name: 'University Basic School, Legon' },
            { _id: 'school-003', school_name: 'Greater Accra Region Primary School' },
            { _id: 'school-004', school_name: 'Kwame Nkrumah Primary School' }
        ];

        let selectedYear = '2024'; // Default year

        function toggleDropdown() {
            const dropdownContent = document.getElementById('dropdownContent');
            dropdownContent.style.display = dropdownContent.style.display === 'block' ? 'none' : 'block';
        }

        function selectYear(year) {
            selectedYear = year;
            const dropdownButton = document.querySelector('.dropdown-button');
            dropdownButton.innerHTML = `${year} <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" width="10" height="6" viewBox="0 0 10 6" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M1 1L5 5L9 1"></path></svg>`;
            toggleDropdown();
            updateSchoolInfo();
        }

        function handleSchoolSearch(event) {
            const searchQuery = event.target.value.toLowerCase();
            const filteredSchools = schoolInfo.filter(school => school.school_name.toLowerCase().includes(searchQuery));
            ReactDOM.render(<SchoolList schools={filteredSchools} />, document.getElementById("school-list"));
        }

        function SchoolList(props) {
            return (
                <ul>
                    {props.schools.map(school => (
                        <li key={school._id} onClick={() => handleSchoolClick(school._id, school.school_name)}>
                            <div>{school.school_name}</div>
                            <div>{school._id}</div>
                            <i className="fa fa-external-link"></i>
                        </li>
                    ))}
                </ul>
            );
        }

        function handleSchoolClick(schoolId, schoolName) {
            window.location.href = `reintegration-tracker.html?school_id=${schoolId}&school_name=${schoolName}&year=${selectedYear}`;
        }
         // Added function to handle back button click
         function goBack() {
            window.location.href = 'reintegration-tracker.html';
        }
        ReactDOM.render(<SchoolList schools={schoolInfo} />, document.getElementById("school-list"));

        const urlParams = new URLSearchParams(window.location.search);
        const schoolId = urlParams.get('school_id');
        const schoolName = urlParams.get('school_name');
        selectedYear = urlParams.get('year') || selectedYear;

        const studentCache = {};

        async function fetchSchoolInfo(schoolId) {
            // Replace this with actual API call to fetch school info
            // const response = await fetch(`/api/schools/${schoolId}`);
            // const data = await response.json();

            // Simulated data
            return {
                _id: schoolId,
                school_name: schoolName,
                total_students: 123, // This should be fetched dynamically
                grades: [
                    { level: 'Kindergarten 1' },
                    { level: 'Kindergarten 2' },
                    { level: 'Primary 1' },
                    { level: 'Primary 2' },
                    { level: 'Primary 3' },
                    { level: 'Primary 4' },
                    { level: 'Primary 5' },
                    { level: 'Primary 6' },
                ]
            };
        }

        async function updateSchoolInfo() {
            const schoolInfo = await fetchSchoolInfo(schoolId);
            const termYearIndicator = `Viewing: Term 1, ${selectedYear}`;

            ReactDOM.render(
                <div>
                    <p className="info-label">School:</p>
                    <p className="info-value">{schoolInfo.school_name}</p>
                </div>,
                document.getElementById("school-name-indicator")
            );

            ReactDOM.render(
                <div>
                    <p className="info-label">Total Students:</p>
                    <p className="info-value">{schoolInfo.total_students}</p>
                </div>,
                document.getElementById("total-students-indicator")
            );

            ReactDOM.render(
                <div>
                    <p className="info-label">Term & Year:</p>
                    <p className="info-value">{termYearIndicator}</p>
                </div>,
                document.getElementById("term-year-indicator")
            );

            fetchGradesForYear(selectedYear);
        }

        function GradeItem(props) {
            const handleGradeClick = async () => {
                const gradeLevel = props.data.level;
                await fetchStudentsForGrade(props.schoolId, gradeLevel);
                document.getElementById("selected-grade-title").innerText = gradeLevel;
                document.getElementById("selected-grade-subtitle").innerText = `Students in ${gradeLevel}`;
            };

            return (
                <div className="school-item" onClick={handleGradeClick}>
                    <p className="school-name">{props.data.level}</p>
                    <p className="school-info">Total enrolled students</p>
                    <p className="school-view-list">View student list by grade</p>
                </div>
            );
        }

        function AddGrades(props) {
            let items = [];
            for (let i = 0; i < props.grades.length; i++) {
                items.push(<GradeItem data={props.grades[i]} schoolId={props.schoolId} />);
            }

            return (
                <section>
                    <div className="grades-list">
                        {items.length > 0 ? items : <p className="grades-subtitle">No grades available.</p>}
                    </div>
                </section>
            );
        }

        async function fetchGradesForYear(year) {
            const schoolInfo = await fetchSchoolInfo(schoolId);
            ReactDOM.render(<AddGrades grades={schoolInfo.grades} schoolId={schoolId} />, document.getElementById("grades-root"));
        }

        function getStudentColor(status) {
            switch (status) {
                case 'progressed':
                    return '#83f18d';
                case 'passed':
                    return '#fcf151';
                case 'dropped':
                    return '#f5554a';
                case 'repeating':
                    return '#ff9a00';
                case 'new':
                    return '#67dfff';
                case 'returning':
                    return '#a058c1';
                default:
                    return '#FFFFFF';
            }
        }

        function StudentItem(props) {
            const handleStudentClick = () => {
                displayStudentProfile(props.data);
            };

            return (
                <tr onClick={handleStudentClick} style={{ cursor: 'pointer', backgroundColor: getStudentColor(props.data.status) }}>
                    <td>{props.data.first_name} {props.data.last_name}</td>
                    <td>{props.data.student_id}</td>
                    <td>{props.data.dob}</td>
                    <td>{props.data.age}</td>
                    <td>{props.data.teacher}</td>
                </tr>
            );
        }

        function AddStudents(props) {
            let items = [];
            for (let i = 0; i < props.students.length; i++) {
                items.push(<StudentItem data={props.students[i]} key={props.students[i].student_id} />);
            }

            return (
                <table className="student-list-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Student ID</th>
                            <th>Date of Birth</th>
                            <th>Age</th>
                            <th>Teacher</th>
                        </tr>
                    </thead>
                    <tbody>
                        {items.length > 0 ? items : <tr><td colSpan="5">There are no students in this grade.</td></tr>}
                    </tbody>
                </table>
            );
        }

        async function fetchStudentsForGrade(schoolId, gradeLevel) {
            const cacheKey = `${schoolId}-${gradeLevel}-${selectedYear}`;
            if (studentCache[cacheKey]) {
                ReactDOM.render(<AddStudents students={studentCache[cacheKey]} />, document.getElementById("students-root"));
                return;
            }

            // Replace this with actual API call to fetch students for the selected grade
            // const response = await fetch(`/api/students?school_id=${schoolId}&grade_level=${gradeLevel}&year=${selectedYear}`);
            // const students = await response.json();

            // Simulated data
            const students = [];
            const statuses = ['progressed', 'passed', 'dropped', 'repeating', 'new', 'returning'];
            for (let i = 1; i <= 60; i++) {
                const status = statuses[Math.floor(Math.random() * statuses.length)];
                students.push({
                    first_name: `Student${i}`,
                    last_name: `LastName${i}`,
                    student_id: `ID${i}`,
                    dob: '2006-01-01',
                    age: 18,
                    teacher: `Teacher${i % 5 + 1}`,
                    status
                });
            }

            studentCache[cacheKey] = students;
            ReactDOM.render(<AddStudents students={students} />, document.getElementById("students-root"));
        }

        function OpenModal(id) {
            const underlay = document.getElementById(`${id}-modal-underlay`);
            underlay.classList.add("blurred-modal-underlay");

            const modal = underlay.querySelector(`#${id}-modal`);
            modal.classList.add("displayed-modal");

            underlay.style.display = "flex";
        }

        function CloseModal(id) {
            const underlay = document.getElementById(`${id}-modal-underlay`);
            underlay.classList.remove("blurred-modal-underlay");

            const modal = underlay.querySelector(`#${id}-modal`);
            modal.classList.remove("displayed-modal");

            setTimeout(() => {
                underlay.style.display = "none";
            }, 200);
        }

        const TextInput = (props) => {
            const inputStyle = { backgroundColor: props.color };

            return (
                <section className="modal-text-input">
                    <p className="modal-text-label">{props.title}</p>
                    <input
                        placeholder={props.placeholder}
                        title={props.title}
                        type="text"
                        id={props.id}
                        required
                        defaultValue={props.value}
                        className="static-width"
                        style={inputStyle}
                    />
                </section>
            );
        }

        const SubmitButton = (props) => {
            return (
                <div className="modal-submit">
                    <input type="submit" value={props.value} />
                </div>
            );
        }

        function StudentProfile(props) {
            const statusColor = getStudentColor(props.student.status);
            return (
                <section>
                    <form id="student-profile-form" onSubmit={(e) => handleProfileSubmit(e, props.student.student_id)}>
                        <div className="input-group">
                            <TextInput title="First Name" placeholder="Enter first name" id="student-first-name" value={props.student.first_name} color={statusColor} />
                            <TextInput title="Last Name" placeholder="Enter last name" id="student-last-name" value={props.student.last_name} color={statusColor} />
                        </div>
                        <div className="input-group">
                            <TextInput title="Student ID" placeholder="Enter student ID" id="student-id" value={props.student.student_id} />
                            <TextInput title="Date of Birth" placeholder="Enter date of birth" id="student-dob" value={props.student.dob} />
                        </div>
                        <div className="input-group">
                            <TextInput title="Age" placeholder="Enter age" id="student-age" value={props.student.age} />
                            <TextInput title="Teacher" placeholder="Enter teacher name" id="student-teacher" value={props.student.teacher} />
                        </div>
                        <div className="input-group">
                            <TextInput title="Parent Contact" placeholder="Enter parent contact" id="student-parent-contact" value={props.student.parent_contact} />
                            <TextInput title="Medical Conditions" placeholder="Enter medical conditions" id="student-health" value={props.student.health_conditions} />
                        </div>
                        <div className="checkbox-group">
                            <label htmlFor="disability-status">Disability Status</label>
                            <input type="checkbox" id="disability-status" name="disability-status" defaultChecked={props.student.disabled} />
                        </div>
                        <TextInput title="Additional Information" placeholder="Enter additional information" id="student-misc" value={props.student.misc_info} />
                        <div className="status-indicator" style={{ backgroundColor: statusColor }}>
                            <p className="status-title">{props.student.status}</p>
                        </div>
                    </form>
                </section>
            );
        }

        function handleProfileSubmit(event, studentID) {
            event.preventDefault();
            CloseModal('student-profile');

            const updatedProfile = {
                first_name: document.getElementById('student-first-name').value,
                last_name: document.getElementById('student-last-name').value,
                student_id: document.getElementById('student-id').value,
                dob: document.getElementById('student-dob').value,
                age: document.getElementById('student-age').value,
                teacher: document.getElementById('student-teacher').value,
                parent_contact: document.getElementById('student-parent-contact').value,
                disabled: document.getElementById('disability-status').checked,
                health_conditions: document.getElementById('student-health').value,
                misc_info: document.getElementById('student-misc').value,
            };

            console.log('Updated profile for student:', studentID, updatedProfile);
            // Add fetch or AJAX request here to update the student profile in the backend
        }

        function displayStudentProfile(student) {
            ReactDOM.render(<StudentProfile student={student} />, document.getElementById("student-profile-modal-root"));
            OpenModal("student-profile");
        }

        document.addEventListener('DOMContentLoaded', async () => {
            await updateSchoolInfo();
        });
    </script>
</body>
</html>